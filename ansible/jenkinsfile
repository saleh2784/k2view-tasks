pipeline {
    options {
      ansiColor('xterm')
    }
    agent any
    
    parameters {
        choice (proc: 'proccess', choices: ['install', 'uninstall'],)
    }

    stages {
        stage('Print Build Number') {
            steps {
                script {
                    echo "my Build number is : ${BUILD_NUMBER}"
                }
            }
        }
        stage('Get SCM') {
            steps {
                git branch: "main", url: 'https://github.com/saleh2784/k2view-tasks.git'
            }
        }
        stage('procees to vim') {

			steps {
			    ansiblePlaybook(
                // installation:'ansible', 
                // limit:'',
                playbook: "ansible/vim_${params.proc}.yml",
                // playbook: "ansible/vim_install.yml",
                inventory: "ansible/host.ini",
                // playbook: "/tmp/install-vim.yml",
                // inventory: "/etc/ansible/hosts",
                become: 'yes',
                extras: '-v',
                // forks: 1
                disableHostKeyChecking: true,
                credentialsId: 'ssh',
                colorized: true
          )
			}
		}


    }

}
